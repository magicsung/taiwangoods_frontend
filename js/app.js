!function(e){var t=function(t,s){this.element=e(t);this.format=i.parseFormat(s.format||this.element.data("date-format")||"mm/dd/yyyy");this.picker=e(i.template).appendTo("body").on({click:e.proxy(this.click,this)});this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on"):false;if(this.isInput){this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this)})}else{if(this.component){this.component.on("click",e.proxy(this.show,this))}else{this.element.on("click",e.proxy(this.show,this))}}this.minViewMode=s.minViewMode||this.element.data("date-minviewmode")||0;if(typeof this.minViewMode==="string"){switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0;break}}this.viewMode=s.viewMode||this.element.data("date-viewmode")||0;if(typeof this.viewMode==="string"){switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0;break}}this.startViewMode=this.viewMode;this.weekStart=s.weekStart||this.element.data("date-weekstart")||0;this.weekEnd=this.weekStart===0?6:this.weekStart-1;this.onRender=s.onRender;this.fillDow();this.fillMonths();this.update();this.showMode()};t.prototype={constructor:t,show:function(t){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();e(window).on("resize",e.proxy(this.place,this));if(t){t.stopPropagation();t.preventDefault()}if(!this.isInput){}var i=this;e(document).on("mousedown",function(t){if(e(t.target).closest(".datepicker").length==0){i.hide()}});this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide();e(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){e(document).off("mousedown",this.hide)}this.element.trigger({type:"hide",date:this.date})},set:function(){var e=i.formatDate(this.date,this.format);if(!this.isInput){if(this.component){this.element.find("input").prop("value",e)}this.element.data("date",e)}else{this.element.prop("value",e)}},setValue:function(e){if(typeof e==="string"){this.date=i.parseDate(e,this.format)}else{this.date=new Date(e)}this.set();this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill()},place:function(){var e=this.component?this.component.offset():this.element.offset();this.picker.css({top:e.top+this.height,left:e.left})},update:function(e){this.date=i.parseDate(typeof e==="string"?e:this.isInput?this.element.prop("value"):this.element.data("date"),this.format);this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill()},fillDow:function(){var e=this.weekStart;var t="<tr>";while(e<this.weekStart+7){t+='<th class="dow">'+i.dates.daysMin[e++%7]+"</th>"}t+="</tr>";this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="";var t=0;while(t<12){e+='<span class="month">'+i.dates.monthsShort[t++]+"</span>"}this.picker.find(".datepicker-months td").append(e)},fill:function(){var e=new Date(this.viewDate),t=e.getFullYear(),s=e.getMonth(),a=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(i.dates.months[s]+" "+t);var n=new Date(t,s-1,28,0,0,0,0),o=i.getDaysInMonth(n.getFullYear(),n.getMonth());n.setDate(o);n.setDate(o-(n.getDay()-this.weekStart+7)%7);var r=new Date(n);r.setDate(r.getDate()+42);r=r.valueOf();var l=[];var h,d,c;while(n.valueOf()<r){if(n.getDay()===this.weekStart){l.push("<tr>")}h=this.onRender(n);d=n.getFullYear();c=n.getMonth();if(c<s&&d===t||d<t){h+=" old"}else if(c>s&&d===t||d>t){h+=" new"}if(n.valueOf()===a){h+=" active"}l.push('<td class="day '+h+'">'+n.getDate()+"</td>");if(n.getDay()===this.weekEnd){l.push("</tr>")}n.setDate(n.getDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(l.join(""));var u=this.date.getFullYear();var p=this.picker.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");if(u===t){p.eq(this.date.getMonth()).addClass("active")}l="";t=parseInt(t/10,10)*10;var f=this.picker.find(".datepicker-years").find("th:eq(1)").text(t+"-"+(t+9)).end().find("td");t-=1;for(var v=-1;v<11;v++){l+='<span class="year'+(v===-1||v===10?" old":"")+(u===t?" active":"")+'">'+t+"</span>";t+=1}f.html(l)},click:function(t){t.stopPropagation();t.preventDefault();var s=e(t.target).closest("span, td, th");if(s.length===1){switch(s[0].nodeName.toLowerCase()){case"th":switch(s[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+i.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+i.modes[this.viewMode].navFnc].call(this.viewDate)+i.modes[this.viewMode].navStep*(s[0].className==="prev"?-1:1));this.fill();this.set();break}break;case"span":if(s.is(".month")){var a=s.parent().find("span").index(s);this.viewDate.setMonth(a)}else{var n=parseInt(s.text(),10)||0;this.viewDate.setFullYear(n)}if(this.viewMode!==0){this.date=new Date(this.viewDate);this.element.trigger({type:"changeDate",date:this.date,viewMode:i.modes[this.viewMode].clsName})}this.showMode(-1);this.fill();this.set();break;case"td":if(s.is(".day")&&!s.is(".disabled")){var o=parseInt(s.text(),10)||1;var a=this.viewDate.getMonth();if(s.is(".old")){a-=1}else if(s.is(".new")){a+=1}var n=this.viewDate.getFullYear();this.date=new Date(n,a,o,0,0,0,0);this.viewDate=new Date(n,a,Math.min(28,o),0,0,0,0);this.fill();this.set();this.element.trigger({type:"changeDate",date:this.date,viewMode:i.modes[this.viewMode].clsName})}break}}},mousedown:function(e){e.stopPropagation();e.preventDefault()},showMode:function(e){if(e){this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+e))}this.picker.find(">div").hide().filter(".datepicker-"+i.modes[this.viewMode].clsName).show()}};e.fn.datepicker=function(i,s){return this.each(function(){var a=e(this),n=a.data("datepicker"),o=typeof i==="object"&&i;if(!n){a.data("datepicker",n=new t(this,e.extend({},e.fn.datepicker.defaults,o)))}if(typeof i==="string")n[i](s)})};e.fn.datepicker.defaults={onRender:function(e){return""}};e.fn.datepicker.Constructor=t;var i={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,i.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},parseFormat:function(e){var t=e.match(/[.\/\-\s].*?/),i=e.split(/\W+/);if(!t||!i||i.length===0){throw new Error("Invalid date format.")}return{separator:t,parts:i}},parseDate:function(e,t){var i=e.split(t.separator),e=new Date,s;e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);if(i.length===t.parts.length){var a=e.getFullYear(),n=e.getDate(),o=e.getMonth();for(var r=0,l=t.parts.length;r<l;r++){s=parseInt(i[r],10)||1;switch(t.parts[r]){case"dd":case"d":n=s;e.setDate(s);break;case"mm":case"m":o=s-1;e.setMonth(s-1);break;case"yy":a=2e3+s;e.setFullYear(2e3+s);break;case"yyyy":a=s;e.setFullYear(s);break}}e=new Date(a,o,n,0,0,0)}return e},formatDate:function(e,t){var i={d:e.getDate(),m:e.getMonth()+1,yy:e.getFullYear().toString().substring(2),yyyy:e.getFullYear()};i.dd=(i.d<10?"0":"")+i.d;i.mm=(i.m<10?"0":"")+i.m;var e=[];for(var s=0,a=t.parts.length;s<a;s++){e.push(i[t.parts[s]])}return e.join(t.separator)},headTemplate:"<thead>"+"<tr>"+'<th class="prev">&lsaquo;</th>'+'<th colspan="5" class="switch"></th>'+'<th class="next">&rsaquo;</th>'+"</tr>"+"</thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};i.template='<div class="datepicker dropdown-menu">'+'<div class="datepicker-days">'+'<table class=" table-condensed">'+i.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+i.headTemplate+i.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+i.headTemplate+i.contTemplate+"</table>"+"</div>"+"</div>"}(window.jQuery);+function(e){"use strict";var t=function(t,i){this.$element=e(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};t.VERSION="3.3.6";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:6e3,pause:"hover",wrap:true,keyboard:true};t.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()};t.prototype.cycle=function(t){t||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval));return this};t.prototype.getItemIndex=function(e){this.$items=e.parent().children(".item");return this.$items.index(e||this.$active)};t.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);var s=e=="prev"&&i===0||e=="next"&&i==this.$items.length-1;if(s&&!this.options.wrap)return t;var a=e=="prev"?-1:1;var n=(i+a)%this.$items.length;return this.$items.eq(n)};t.prototype.to=function(e){var t=this;var i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(e>this.$items.length-1||e<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){t.to(e)});if(i==e)return this.pause().cycle();return this.slide(e>i?"next":"prev",this.$items.eq(e))};t.prototype.pause=function(t){t||(this.paused=true);if(this.$element.find(".next, .prev").length&&e.support.transition){this.$element.trigger(e.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};t.prototype.next=function(){if(this.sliding)return;return this.slide("next")};t.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};t.prototype.slide=function(i,s){var a=this.$element.find(".item.active");var n=s||this.getItemForDirection(i,a);var o=this.interval;var r=i=="next"?"left":"right";var l=this;if(n.hasClass("active"))return this.sliding=false;var h=n[0];var d=e.Event("slide.bs.carousel",{relatedTarget:h,direction:r});this.$element.trigger(d);if(d.isDefaultPrevented())return;this.sliding=true;o&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=e(this.$indicators.children()[this.getItemIndex(n)]);c&&c.addClass("active")}var u=e.Event("slid.bs.carousel",{relatedTarget:h,direction:r});if(e.support.transition&&this.$element.hasClass("slide")){n.addClass(i);n[0].offsetWidth;a.addClass(r);n.addClass(r);a.one("bsTransitionEnd",function(){n.removeClass([i,r].join(" ")).addClass("active");a.removeClass(["active",r].join(" "));l.sliding=false;setTimeout(function(){l.$element.trigger(u)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)}else{a.removeClass("active");n.addClass("active");this.sliding=false;this.$element.trigger(u)}o&&this.cycle();return this};function i(i){return this.each(function(){var s=e(this);var a=s.data("bs.carousel");var n=e.extend({},t.DEFAULTS,s.data(),typeof i=="object"&&i);var o=typeof i=="string"?i:n.slide;if(!a)s.data("bs.carousel",a=new t(this,n));if(typeof i=="number")a.to(i);else if(o)a[o]();else if(n.interval)a.pause().cycle()})}var s=e.fn.carousel;e.fn.carousel=i;e.fn.carousel.Constructor=t;e.fn.carousel.noConflict=function(){e.fn.carousel=s;return this};var a=function(t){var s;var a=e(this);var n=e(a.attr("data-target")||(s=a.attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,""));if(!n.hasClass("carousel"))return;var o=e.extend({},n.data(),a.data());var r=a.attr("data-slide-to");if(r)o.interval=false;i.call(n,o);if(r){n.data("bs.carousel").to(r)}t.preventDefault()};e(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a);e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery);$(document).ready(function(){$('a[href="#top"]').click(e);function e(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);console.log(e);e=e.length?e:$("[name="+this.hash.slice(1)+"]");if(e.length){$("html,body").animate({scrollTop:e.offset().top},400);return false}}}var t=$(window).width();if(t<768){$("html, body").scrollTop(50)}function i(e){$("#menu-toggle").css("display","block");$("#menu-content").animate({left:"0"},300);$("html").addClass("noscroll")}function s(e){e.preventDefault();$("#menu-content").animate({left:"-75%"},300,function(){$("#menu-toggle").css("display","none")});$("html").removeClass("noscroll")}var a=document.getElementById("open-menu");a.addEventListener("click",i);var n=document.getElementById("close-menu");n.addEventListener("click",s);var o=function(e){e.preventDefault();$(this).siblings().slideToggle(200,function(){$(this).siblings().toggleClass("active");$(this).parent().siblings().children(".menu-sub-items").slideUp(200,function(){$(this).siblings().removeClass("active")})})};$(".menu-collapse").click(o);$(".category-title").click(function(e){e.preventDefault();$(this).siblings(".sub-category").slideToggle("fast");$(this).toggleClass("active")});var r=function(e){e.preventDefault();var t=$(this).children("img").data("lg");var i=$(this).children("img").data("xl");$("#image-view").children("img").attr("src",t).data("url",i)};$(".thumbnail-image").click(r).hover(r);$("#image-view").click(function(e){e.preventDefault();var t=$(this).children("img").data("url");$("#light-box").children("img").attr("src",t);$("#light-box").fadeIn(300);$("html").addClass("noscroll")});$("#light-box").click(function(){$(this).fadeOut(300);$("html").removeClass("noscroll")});$("body").keypress(function(e){if(e.which==27){$("#light-box").fadeOut(300);h()}});$("#ad-carousel").swiperight(function(){$(this).carousel("prev")});$("#ad-carousel").swipeleft(function(){$(this).carousel("next")});if($("head > title").text()=="會員登入"){$("header .login").removeClass("login")}else if($("head > title").text()=="忘記密碼"){$("header .login").removeClass("login").attr("href","/login")}function l(e){$(e).fadeIn("slow");$(e+" .content").slideDown();$("html").addClass("noscroll")}function h(){$(".popout-animation").children(".content").slideUp();$(".popout-animation").fadeOut("slow");$("html").removeClass("noscroll")}function d(){var e=document.getElementsByClassName("close-popout");$(".close-popout").click(h);$(".close-popout-area").click(h)}function c(e){h();$("#popout").load("/popout/"+e,function(){l("."+e);d()})}function u(e){$("#popout").load("/popout/"+e,function(){h();l(".popout-notice");d()})}$(document).on("click",".login",function(e){e.preventDefault();c("popout-login")});$(document).on("click",".forgot-pwd",function(e){e.preventDefault();c("popout-forgot-password")});var p=["notice-add-cart-success","notice-checkout-fail","notice-register-success","notice-search-fail"];for(var f=0;f<p.length;f++){$(document).on("click","."+p[f],function(e){e.preventDefault();u($(this).prop("class"))})}function v(e,t,i){m(t,i,e)}function m(e,t,i){e=typeof e!=="undefined"?e:"";t=typeof t!=="undefined"?t:"";i=typeof i!=="undefined"?i:"";$("#popout").load("/popout/popout-alert",function(){h();if(i=="success"){$(".popout .message").html(e).parent().prepend('<i class="material-icons notice-icon icon-with-circle">&#xE876;</i>')}else if(i=="wrong"){$(".popout .message").html(e).parent().prepend('<i class="material-icons notice-icon icon-yellow">&#xE000;</i>')}l(".popout-notice");d();if(t!==""){setTimeout(function(){h()},t)}})}var g=0;var w=0;var y=$("#header-category-bar > li").length;for(var f=0;f<y;f++){g+=$("#header-category-bar > li"+":nth-child("+f+")").width()}w=g-$("#header-category-bar").width();var k=$(".category > ul");$(".arrow-left").mouseenter(function(){k.animate({scrollLeft:0},1e3)}).mouseleave(function(){k.stop()});$(".arrow-right").mouseenter(function(){k.animate({scrollLeft:w+300},1e3)}).mouseleave(function(){k.stop()})});+function(e){"use strict";function t(){var e=document.createElement("bootstrap");var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t){if(e.style[i]!==undefined){return{end:t[i]}}}return false}e.fn.emulateTransitionEnd=function(t){var i=false;var s=this;e(this).one("bsTransitionEnd",function(){i=true});var a=function(){if(!i)e(s).trigger(e.support.transition.end)};setTimeout(a,t);return this};e(function(){e.support.transition=t();if(!e.support.transition)return;e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}})}(jQuery);